<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Owl_nlp_tfidf (owl.Owl_nlp_tfidf)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><meta name="generator" content="doc-ock-html v1.0.0-1-g1fc9bf0"/></head><body><nav id="top"><a href="../index.html">Up</a> &mdash; <span class="package">package <a href="../index.html">owl</a></span></nav><header><h1><span class="keyword">Module</span> <span class="module-path">Owl_nlp_tfidf</span></h1></header><p>NLP: TFIDF module</p><div class="h7">Type definition</div><div class="spec type" id="type-tf_typ"><a href="#type-tf_typ" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>tf_typ</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-tf_typ.Binary" class="anchored"><td class="def constructor"><a href="#type-tf_typ.Binary" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Binary</span></code></td></tr><tr id="type-tf_typ.Count" class="anchored"><td class="def constructor"><a href="#type-tf_typ.Count" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Count</span></code></td></tr><tr id="type-tf_typ.Frequency" class="anchored"><td class="def constructor"><a href="#type-tf_typ.Frequency" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Frequency</span></code></td></tr><tr id="type-tf_typ.Log_norm" class="anchored"><td class="def constructor"><a href="#type-tf_typ.Log_norm" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Log_norm</span></code></td><td class="doc"><p>(** Type of term frequency. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-df_typ"><a href="#type-df_typ" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>df_typ</code><code></code><code><span class="keyword"> = </span></code><table class="variant"><tr id="type-df_typ.Unary" class="anchored"><td class="def constructor"><a href="#type-df_typ.Unary" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Unary</span></code></td></tr><tr id="type-df_typ.Idf" class="anchored"><td class="def constructor"><a href="#type-df_typ.Idf" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Idf</span></code></td></tr><tr id="type-df_typ.Idf_Smooth" class="anchored"><td class="def constructor"><a href="#type-df_typ.Idf_Smooth" class="anchor"></a><code><span class="keyword">| </span></code><code><span class="constructor">Idf_Smooth</span></code></td><td class="doc"><p>(** Type of inverse document frequency. *)</p></td></tr></table><code></code></div><div class="doc"></div></div><div class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><div class="def type"><code><span class="keyword">type </span>t</code><code></code><code></code></div><div class="doc"><p>Type of a TFIDF model</p></div></div><div class="h7">Query model</div><div class="spec val" id="val-length"><a href="#val-length" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>length : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Size of Tfidf model, i.e. number of documents contained.</p></div></div><div class="spec val" id="val-term_freq"><a href="#val-term_freq" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>term_freq : <a href="index.html#type-tf_typ">tf_typ</a> <span class="keyword">&#8209;&gt;</span> float <span class="keyword">&#8209;&gt;</span> float <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>``term_freq term_count num_words`` calculates the term frequency weight.</p></div></div><div class="spec val" id="val-doc_freq"><a href="#val-doc_freq" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>doc_freq : <a href="index.html#type-df_typ">df_typ</a> <span class="keyword">&#8209;&gt;</span> float <span class="keyword">&#8209;&gt;</span> float <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>``doc_freq doc_count num_docs`` calculates the document frequency weight.</p></div></div><div class="spec val" id="val-get_uri"><a href="#val-get_uri" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_uri : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Return the path of the TFIDF model.</p></div></div><div class="spec val" id="val-get_corpus"><a href="#val-get_corpus" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_corpus : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a></code></div><div class="doc"><p>Return the corpus contained in TFIDF model</p></div></div><div class="spec val" id="val-vocab_len"><a href="#val-vocab_len" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>vocab_len : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int</code></div><div class="doc"><p>Return the size of the vocabulary contained in the TFIDF model.</p></div></div><div class="spec val" id="val-get_handle"><a href="#val-get_handle" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get_handle : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> Pervasives.in_channel</code></div><div class="doc"><p>Geht the file handle associated with TFIDF model.</p></div></div><div class="spec val" id="val-doc_count_of"><a href="#val-doc_count_of" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>doc_count_of : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>``doc_count_of tfidf w`` calculate document frequency for a given word ``w``.</p></div></div><div class="spec val" id="val-doc_count"><a href="#val-doc_count" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>doc_count : <a href="../Owl_nlp_vocabulary/index.html#type-t">Owl_nlp_vocabulary.t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> float array<span class="keyword"> * </span>int</code></div><div class="doc"><p>``doc_count vocab fname``count occurrency in all documents contained in the raw text corpus of file ``fname``, for all words</p></div></div><div class="spec val" id="val-term_count"><a href="#val-term_count" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>term_count : (<span class="type-var">'a</span>, float) Hashtbl.t <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>``term_count count doc`` counts the term occurrency in a document, and saves the result in count hashtbl.</p></div></div><div class="spec val" id="val-density"><a href="#val-density" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>density : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> float</code></div><div class="doc"><p>Return the percentage of non-zero elements in doc-term matrix.</p></div></div><div class="spec val" id="val-doc_to_vec"><a href="#val-doc_to_vec" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>doc_to_vec : (float, <span class="type-var">'a</span>) Bigarray.kind <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array <span class="keyword">&#8209;&gt;</span> (float, <span class="type-var">'a</span>) <a href="../Owl_dense_ndarray/Generic/index.html#type-t">Owl_dense.Ndarray.Generic.t</a></code></div><div class="doc"><p>``doc_to_vec kind tfidf vec`` converts a TFIDF vector from its sparse represents to dense ndarray vector whose length equals the vocabulary size.</p></div></div><div class="h7">Iteration functions</div><div class="spec val" id="val-get"><a href="#val-get" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>get : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array</code></div><div class="doc"><p>Return the ith TFIDF vector in the model. The format of return is ``(vocabulary index, weight)`` tuple array of a document.</p></div></div><div class="spec val" id="val-next"><a href="#val-next" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>next : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array</code></div><div class="doc"><p>Return the next document vector in the model. The format of return is ``(vocabulary index, weight)`` tuple array of a document.</p></div></div><div class="spec val" id="val-next_batch"><a href="#val-next_batch" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>next_batch : ?&#8288;size:int <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array array</code></div><div class="doc"><p>Return the next batch of document vectors in the model, the default size is 100.</p></div></div><div class="spec val" id="val-iteri"><a href="#val-iteri" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>iteri : (int <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array <span class="keyword">&#8209;&gt;</span> unit) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Iterate all the document vectors in a TFIDF model. The format of document vector is ``(vocabulary index, weight)`` tuple array of a document.</p></div></div><div class="spec val" id="val-mapi"><a href="#val-mapi" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>mapi : (int <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span>) <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> <span class="type-var">'a</span> array</code></div><div class="doc"><p>Map all the document vectors in a TFIDF model. The format of document vector is ``(vocabulary index, weight)`` tuple array of a document.</p></div></div><div class="spec val" id="val-reset_iterators"><a href="#val-reset_iterators" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>reset_iterators : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Reset the iterator to the begining of the TFIDF model.</p></div></div><div class="h7">Core functions</div><div class="spec val" id="val-build"><a href="#val-build" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>build : ?&#8288;norm:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;sort:bool <span class="keyword">&#8209;&gt;</span> ?&#8288;tf:<a href="index.html#type-tf_typ">tf_typ</a> <span class="keyword">&#8209;&gt;</span> ?&#8288;df:<a href="index.html#type-df_typ">df_typ</a> <span class="keyword">&#8209;&gt;</span> <a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>This function builds up a TFIDF model according to the passed in paramaters.</p><p>Parameters:
* ``norm``: whether to normalise the vectors in the TFIDF model, default is ``false``.
* ``sort``: whether to sort the terms in a TFIDF vector in increasing order w.r.t their vocabulary indices. The default is ``false``.
* ``tf``: type of term frequency used in building TFIDF. The default is ``Count``.
* ``df``: type of document frequency used in building TFIDF. The default is ``Idf``.
* ``corpus``: the corpus built by ``Owl_nlp_corpus`` model atop of which TFIDF will be built.</p></div></div><div class="h7">I/O functions</div><div class="spec val" id="val-save"><a href="#val-save" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>save : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>``save tfidf fname`` saves the TFIDF to a file of given file name ``fname``.</p></div></div><div class="spec val" id="val-load"><a href="#val-load" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>load : string <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>``load fname`` loads a TFIDF from a file of name ``fname``.</p></div></div><div class="spec val" id="val-to_string"><a href="#val-to_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>to_string : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Convert a TFIDF to its string representation, contains summary information.</p></div></div><div class="spec val" id="val-print"><a href="#val-print" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>print : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> unit</code></div><div class="doc"><p>Pretty print out the summary information of a TFIDF model.</p></div></div><div class="h7">Helper functions</div><div class="spec val" id="val-tf_typ_string"><a href="#val-tf_typ_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>tf_typ_string : <a href="index.html#type-tf_typ">tf_typ</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Convert term frequency type into string.</p></div></div><div class="spec val" id="val-df_typ_string"><a href="#val-df_typ_string" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>df_typ_string : <a href="index.html#type-df_typ">df_typ</a> <span class="keyword">&#8209;&gt;</span> string</code></div><div class="doc"><p>Convert document frequency type into string.</p></div></div><div class="spec val" id="val-apply"><a href="#val-apply" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>apply : <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> string <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array</code></div><div class="doc"><p>Convert a single document according to a given model</p></div></div><div class="spec val" id="val-normalise"><a href="#val-normalise" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>normalise : (<span class="type-var">'a</span><span class="keyword"> * </span>float) array <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span>float) array</code></div><div class="doc"><p>``normalise x`` makes ``x`` a unit vector by dividing its l2norm.</p></div></div><div class="spec val" id="val-create"><a href="#val-create" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>create : <a href="index.html#type-tf_typ">tf_typ</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-df_typ">df_typ</a> <span class="keyword">&#8209;&gt;</span> <a href="../Owl_nlp_corpus/index.html#type-t">Owl_nlp_corpus.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a></code></div><div class="doc"><p>Wrap up a TFIDF model type. Low-level function and you are not supposed to use it.</p></div></div><div class="spec val" id="val-all_pairwise_distance"><a href="#val-all_pairwise_distance" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>all_pairwise_distance : <a href="../Owl_nlp_similarity/index.html#type-t">Owl_nlp_similarity.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span>float) array <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array</code></div><div class="doc"><p>Calculate pairwise distance for the whole model, return format is ``(id,dist)`` array.</p></div></div><div class="spec val" id="val-nearest"><a href="#val-nearest" class="anchor"></a><div class="def val"><code><span class="keyword">val </span>nearest : ?&#8288;typ:<a href="../Owl_nlp_similarity/index.html#type-t">Owl_nlp_similarity.t</a> <span class="keyword">&#8209;&gt;</span> <a href="index.html#type-t">t</a> <span class="keyword">&#8209;&gt;</span> (<span class="type-var">'a</span><span class="keyword"> * </span>float) array <span class="keyword">&#8209;&gt;</span> int <span class="keyword">&#8209;&gt;</span> (int<span class="keyword"> * </span>float) array</code></div><div class="doc"><p>Return K-nearest neighbours, it is very slow due to linear search.</p></div></div></body></html>